<!--
Copyright 2025 IDEMIA Public Security
Copyright 2020-2024 IDEMIA Identity & Security

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no">
        <title>Passive video liveness detection</title>
        <link rel="stylesheet" href="./css/bootstrap.min.css">
        <link rel="stylesheet" href="./css/style.css">
        <link rel="apple-touch-icon" sizes="180x180" href="./favicons/logo-180.png">
        <link rel="shortcut icon" href="./favicons/logo-16.png">
        <link rel="icon" type="image/png" sizes="32x32" href="./favicons/logo-32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="./favicons/logo-16.png">
        <link rel="manifest" href="./favicons/manifest.json">
        <link rel="mask-icon" href="./favicons/safari-pinned-tab.svg" color="#430099">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-title" content="WebSDK">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="theme-color" content="#430099"/>
    </head>
    <body>
        <main class="container-fluid animation-tut">
            <!-- Check browser compatibility-->
            <div id="step-compatibility" class="row step d-none">
                <div class="col-12 description">
                    <%= __("You seem to be using an unsupported browser.") %>
                </div>
                <div class="col-12 browsers-description">
                    <p><%= __("Please use one of following browsers for a better experience") %></p>
                </div>
                <div class="col-12 browsers-content">
                    <table class="os-list">
                    </table>
                    <table class="browsers">
                    </table>
                </div>
            </div>

            <!-- Check network-->
            <div id="step-weak-network" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content loader-wrapper d-flex flex-column">
                        <div class="loader-animation align-self-center">
                            <div></div>
                        </div>
                        <span class="animation-title-text text-center"><%= __("Checking network signal") %></span>
                    </div>
                </div>
                <div class="check-phone animation">
                    <div class="animation-content">
                        <div class="">
                            <img width="100" src="./img/wifi-weak.png" alt="Weak network signal">
                        </div>
                        <div class="animation-title-text text-center"><span><%= __("Weak network signal") %> <span
                                class="signal-value"></span></span></div>
                        <div class="animation-text">
                            <span class="download"><%= __("This process only works with a connection speed of at least") %></span>
                            <span class="upload"><%= __("This process only works with an upload connection speed of at least") %></span>
                            <span class="signal-min-value"></span>.
                            <span class=""><%= __("It appears your network signal is too weak.") %></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block" id="check-network"><%= __("re-test network connection") %></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="connectivity-check" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content loader-wrapper d-flex flex-column">
                        <div class="loader-animation align-self-center">
                            <div></div>
                        </div>
                        <span class="animation-title-text text-center"><%= __("Checking network signal") %></span>
                    </div>
                </div>
            </div>
            <div id="step-good-network" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="check-phone animation">
                    <div class="animation-content">
                        <div class="">
                            <img width="100" src="./img/wifi-medium.png" alt="Good network signal">
                        </div>
                            <div class="animation-title-text text-center"><span><%= __("Good network signal") %> <span
                                    class="signal-value"></span></span>
                            </div>
                        <div class="animation-text">
                            <span class=""><%= __("This process only works with a connection speed of at least") %></span>
                            <span class="signal-min-value"></span>.
                            <span class=""><%= __("So make sure you maintain a good connection.") %></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block" data-target="#step-1-restore"><%= __("i'm ready") %></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- landing page -->
            <div id="step-1-anim" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="animation-tutorial">
                            <img src="./img/letscan3.svg" alt="Lets scan">
                        </div>
                        <div class="animation-title-text">
                            <span><%= __("Let’s scan your face now") %></span>
                        </div>
                        <div class="animation-text">
                            <span><%= __("Make sure you are in a well-lit environment and don’t move while your face is being scanned.") %></span><br/>
                            <span><%= __("It’s okay to wear eyeglasses, but remove accessories that are covering your face.") %></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block" data-target="#connectivity-check" data-delay>
                                    <%= __("Continue") %>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="watch-tutorial-link">
                                    <img alt="Play tutorial" src="./img/play-tutorial.svg">
                                    <a class="watch-tutorial-text" data-target="#tutorial-anim" data-delay="5000"><%= __("Watch tutorial") %></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- watch tutorial -->
            <div id="tutorial-anim" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="liveness-passive-video-tutorial"></div>
                        <div class="animation-text">
                            <span><%= __("Hold your device still and make sure the light source is in front of you.") %></span>
                        </div>
                        <div class="animation-text">
                            <span><%= __("Center you face within the oval and follow the on-screen instructions.") %></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block" data-target="#step-1-restore">
                                    <%= __("Ok, I got it") %>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Camera access -->
            <div id="step-access-permission" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="animation-tutorial">
                            <img src="./img/cameraPermission.svg" alt="Camera Access">
                        </div>
                        <div class="animation-title-text">
                            <span><%= __("Camera Access") %></span>
                        </div>
                        <div class="animation-text">
                            <span><%= __("In order to authenticate you, we need access to your camera. Sounds good ?") %></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block" data-target="#socket-init" data-delay>
                                    <%= __("I accept") %>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- No camera access -->
            <div id="step-No-camera-access" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="animation-tutorial">
                            <img src="./img/somethingWentWrong.svg" alt="Something went wrong">
                        </div>
                        <div class="animation-title-text">
                            <span><%= __("No camera access") %></span>
                        </div>
                        <div class="animation-text">
                            <span><%= __("We need access to your camera. Click Allow on the popup or enable it in your privacy settings. Please refresh the page to restart the demo.") %></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block reset-animations refresh" onclick="window.location.reload(); return false;"><%= __("Refresh the page") %></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Video Liveness detection -->
            <div id="step-liveness" class="row step d-none">
                <div class="col-12 animation">
                    <div class="video-block video-opacity">
                        <!-- Cross to stop the capture -->
                        <div id="stop-capture" data-target="#step-1" class="d-none-fadeout btn btn-outline-primary">
                            <img id="back_cross" src="./img/back_cross.svg" alt="back">
                        </div>
                        <!-- Video management -->
                        <video id="user-video" class="w-100 h-100" style="object-fit: cover" autoplay playsinline></video>

                    </div>
                    <div id="dont-move-animation" class="d-none-fadeout move-message w-100 no-header-h-100">
                        <span class="video-msg"><%= __("Great !") %> <%= __("Stay within the oval") %></span>
                    </div>
                    <div id="scan-animation" class="d-none-fadeout move-message w-100 no-header-h-100">
                        <span class="video-msg"><%= __("Scanning...") %> <%= __("Stay within the oval") %></span>
                    </div>
                    <!-- Loading finish -->
                    <div id="loading-challenge" class="d-none-fadeout video-overlay w-100 no-header-h-100 flex-column">
                        <header class="row header liveness-header">
                            <div class="col logo">
                                <img alt="Logo" src="./img/logo-passive-video.png">
                            </div>
                        </header>
                        <div class="loader-wrapper d-flex flex-column">
                            <div class="loader-animation align-self-center">
                                <div></div>
                            </div>
                            <span class="loader-title"><%= __("Processing now...") %></span>
                            <span class="loader-text"><%= __("This will take just a moment.") %></span>
                        </div>
                    </div>
                    <!-- Loading init -->
                    <div id="loading-initialized" class="d-none-fadeout video-overlay w-100 no-header-h-100 flex-column">
                        <header class="row header liveness-header">
                            <div class="col logo">
                                <img alt="Logo" src="./img/logo-passive-video.png">
                            </div>
                        </header>
                        <div class="loader-wrapper d-flex flex-column">
                            <div class="loader-animation align-self-center">
                                <div></div>
                            </div>
                            <span class="loader-title"><%= __("Preparing...") %></span>
                            <span class="loader-text"><%= __("Please wait a moment.") %></span>
                        </div>
                    </div>
                    <!-- Instruction position -->
                    <div id="center-head-animation" class="d-none-fadeout move-message w-100 no-header-h-100">
                        <span class="video-msg"><%= __("Position your face within the oval") %></span>
                    </div>
                    <!-- Instruction move closer -->
                    <div id="move-closer-animation" class="d-none-fadeout move-message w-100 no-header-h-100 ">
                        <span class="video-msg"><%= __("Move closer") %></span>
                    </div>
                    <!-- Instruction move further -->
                    <div id="move-further-animation" class="d-none-fadeout move-message w-100 no-header-h-100 ">
                        <span class="video-msg"><%= __("Move further") %></span>
                    </div>
                    <!-- Phone position management -->
                    <div id="phone-not-vertical-animation"
                         class="video-msg-wrapper d-none-fadeout video-overlay w-100 no-header-h-100 flex-column">
                        <header class="row header liveness-header">
                            <div class="col logo">
                                <img alt="Logo" src="./img/logo-passive-video.png">
                            </div>
                        </header>
                        <div class="animation d-flex flex-column">
                            <div class="animation-content">
                                <div class="animation-image">
                                    <img src="./img/chevrons_up.svg" alt="Please hold your phone vertically"/>
                                </div>
                                <div class="animation-title-text text-center">
                                    <span><%= __("Please hold your phone vertically.") %></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Liveness Results OK -->
            <div id="step-liveness-ok" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation success-no-ipv d-none">
                    <div class="animation-content">
                        <div id="best-image">
                            <img src="./img/success_tick.svg" alt="success">
                        </div>
                        <span class="animation-title-text"><%= __("Good Job !")%></span>
                        <span class="animation-text next-step"><%= __("Now, we will ask you to upload a photo of your face, so that we can match it with your selfies.")%></span>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block next-step" data-target="#step-selfie">
                                    <%= __("Next") %>
                                </button>
                                <button class="btn btn-primary btn-block reset-step reset-animations" data-target="#step-1">
                                    <%= __("Submit") %>
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="take-new-capture-text"><%= __("Or repeat if you see it’s needed.") %></div>
                                <div class="take-new-capture-link"><a data-target="#step-1"><%= __("Retake selfie") %></a></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col success-ipv d-none">
                    <div class="col-12 animation success-ipv-block display-block">
                        <div class="row">
                            <div class="col-md-11 offset-md-1 col-lg-8 offset-lg-2">
                                <div class="success-message-ipv">
                                    <div class="row justify-content-center">
                                        <img src="./img/success_tick.svg" alt="success">
                                    </div>
                                    <div class="row justify-content-center">
                                        <span class="description text-center col align-self-center"><%= __("You passed liveness!") %></span>
                                    </div>
                                </div>
                                <div class="padb20">
                                    <button class="col-md-4 offset-md-4 btn btn-primary btn-block reset-step reset-animations small-font-small-phone"
                                            data-target="#step-1"><%= __("restart demo") %>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row padT20">
                            <div id="debug-ipv-portrait" class="col-md-6">
                                <button id="get-ipv-portrait"
                                        class="col-md-8 offset-md-2 btn btn-primary btn-block reset-animations small-font-small-phone">
                                    <%= __("Get GIPS portrait - dev only !") %>
                                </button>
                                <div class="padb20">
                                    <img id="best-image-ipv" class="d-none" alt="best image" src="">
                                </div>
                            </div>
                            <div id="debug-ipv-transaction" class="col-md-6">
                                <button id="get-ipv-transaction"
                                        class="col-md-8 offset-md-2 btn btn-primary btn-block reset-animations small-font-small-phone">
                                    <%= __("Get GIPS transaction - dev only !") %>
                                </button>
                                <pre id="get-ipv-status-result" class="d-none"></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Liveness Results Timeout -->
            <div id="step-liveness-timeout" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="animation-tutorial">
                            <img src="./img/somethingWentWrong.svg" alt="Something went wrong">
                        </div>
                        <div class="animation-title-text">
                            <span><%= __("Oops! There were a few issues") %></span>
                        </div>
                        <br/>
                        <span><%= __("Check the tips below or try using a different device.") %></span>
                        <br/>
                        <table class="table-liveness-instructions"><!-- TODO: do not use table use div instead -->
                            <tr>
                                <td class="table-img-liveness-instructions">
                                    <img src="./img/light.svg" alt="Liveness instruction light">
                                </td>
                                <td class="table-txt-liveness-instructions">
                                    <span><%= __("Make sure your face is well-lit and the light source is in front of you.") %></span>
                                </td>
                            </tr>
                            <tr>
                                <td class="table-img-liveness-instructions">
                                    <img src="./img/eyes-level.svg" alt="Liveness instruction eyes level">
                                </td>
                                <td class="table-txt-liveness-instructions">
                                    <span><%= __("Hold your device still and at eye level.") %></span>
                                </td>
                            </tr>
                            <tr>
                                <td class="table-img-liveness-instructions">
                                    <img src="./img/person.svg" alt="Liveness instruction person">
                                </td>
                                <td class="table-txt-liveness-instructions">
                                    <span><%= __("Make sure that you are the only person in the camera.") %></span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block reset-animations" data-target="#socket-init">
                                    <%= __("Try again") %>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Liveness Results SPOOF -->
            <div id="step-liveness-ko" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="animation-tutorial">
                            <img src="./img/somethingWentWrong.svg" alt="Something went wrong">
                        </div>
                        <div class="animation-title-text">
                            <span><%= __("Oops! There were a few issues") %></span>
                        </div>
                        <br/>
                        <span><%= __("Check the tips below or try using a different device.") %></span>
                        <br/>
                        <table class="table-liveness-instructions"><!-- TODO: do not use table use div instead -->
                            <tr>
                                <td class="table-img-liveness-instructions">
                                    <img src="./img/light.svg" alt="Liveness instruction light">
                                </td>
                                <td class="table-txt-liveness-instructions">
                                    <span><%= __("Make sure your face is well-lit and the light source is in front of you.") %></span>
                                </td>
                            </tr>
                            <tr>
                                <td class="table-img-liveness-instructions">
                                    <img src="./img/eyes-level.svg" alt="Liveness instruction eyes level">
                                </td>
                                <td class="table-txt-liveness-instructions">
                                    <span><%= __("Hold your device still and at eye level.") %></span>
                                </td>
                            </tr>
                            <tr>
                                <td class="table-img-liveness-instructions">
                                    <img src="./img/person.svg" alt="Liveness instruction person">
                                </td>
                                <td class="table-txt-liveness-instructions">
                                    <span><%= __("Make sure that you are the only person in the camera.") %></span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block reset-animations" data-target="#socket-init">
                                    <%= __("Try again") %>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Liveness Results FAILED -->
            <div id="step-liveness-failed" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="animation-tutorial">
                            <img src="./img/somethingWentWrong.svg" alt="Something went wrong">
                        </div>
                        <div class="animation-title-text">
                            <span><%= __("Something went wrong") %></span>
                        </div>
                        <div class="animation-text">
                            <span><%= __("Please restart your liveness by clicking Try again.") %></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block reset-animations" data-target="#socket-init">
                                    <%= __("Try again") %>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Liveness Results: Too Many attempts -->
            <div id="step-liveness-fp-block" class="row step d-none results">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="col-12 animation">
                    <img src="./img/icons-product-lock-large.svg" alt="failure">
                    <span class="too-many-attempts"><%= __("Too Many attempts!") %></span>
                    <span class="for-security-reason"><%= __("For security reason, we have temporarily disabled access to verification.") %></span>
                    <span class="please-try-again-in"><%= __("Please try again in") %> <span class="fp-countdown"></span></span>
                    <button class="btn btn-primary btn-block reset-animations retry-fp" data-target="#socket-init"><%= __("Try again") %></button>
                </div>
            </div>

            <div id="step-server-overloaded" class="row step d-none results">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="col-12 animation">
                    <img src="./img/server-overloaded.svg" alt="server-overloaded">
                    <span class="server-overloaded-title"><%= __("Server is at capacity") %></span>
                    <span class="server-overloaded-description"><%= __("The server is currently unable to handle your request. Please try again in a few moments.") %></span>
                    <button class="btn btn-primary btn-block reset-animations retry-fp" data-target="#socket-init"><%= __("Try again") %></button>
                </div>
            </div>

            <!-- Selfie upload -->
            <div id="step-selfie" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="animation-tutorial">
                            <img src="./img/take_a_selfie.svg" alt="Lets scan">
                        </div>
                        <div class="animation-title-text">
                            <span class="mobile-item"><%= __("Now, take a selfie") %></span>
                            <span class="pc-item"><%= __("Upload your selfie") %></span>
                        </div>
                        <div class="animation-text">
                            <span class="mobile-item"><%= __("Please take a moment to take a selfie and then upload your picture here.") %></span>
                            <span class="pc-item"><%= __("Please take a moment to take a selfie and then upload your picture here.") %></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button id="takeMyPickture" class="btn btn-primary btn-block btn-block">
                                    <span class="mobile-item"><%= __("Take a selfie") %></span>
                                    <span class="pc-item"><%= __("Upload my picture") %></span>
                                </button>
                                <input hidden accept="image/*" capture="user" class="file-upload" id="selfieInput" name="image" type="file" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Matching Results OK -->
            <div id="step-selfie-ok" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="row justify-content-center">
                            <img src="./img/matching_successful.svg" alt="success">
                        </div>
                        <span class="animation-title-text"><%= __("Good Job !")%></span><br>
                        <span class="animation-text"><%= __("Matching succeeded") %></span>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block reset-step reset-animations" data-target="#step-1"> <%= __("Submit") %> </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="take-new-capture-text"><%= __("Or repeat if you see it’s needed.") %></div>
                                <div class="take-new-capture-link"><a data-target="#step-1"><%= __("Retake selfie") %></a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Matching Results KO -->
            <div id="step-selfie-ko" class="row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="animation-tutorial">
                            <img src="./img/somethingWentWrong.svg" alt="Something went wrong">
                        </div>
                        <span class="animation-title-text"><%= __("Oops! Matching failed") %></span><br>
                        <span class="animation-text"><%= __("Your selfies do not match. please try again.") %></span>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block reset-animations" data-target="#step-selfie">
                                    <%= __("Try again") %>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- loading -->
            <div id="loading" class="loading row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="col-12 animation">
                    <div class="loader-animation">
                        <div></div>
                    </div>
                    <span class="description text-center"><%= __("Uploading image") %></span>
                </div>
            </div>
            <div id="loading-results" class="loading row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="col-12 animation">
                    <div class="loader-animation">
                        <div></div>
                    </div>
                    <span class="description text-center"><%= __("Loading results ...") %></span>
                </div>
            </div>
            <div id="uploading-results" class="loading row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="col-12 animation">
                    <div id="uploading-infinite" class="loader-animation">
                        <div></div>
                    </div>
                    <div id="uploading-progress" class="loader-progress">
                        <div class="middle-circle"></div>
                        <div class="progress-spinner"></div>
                    </div>
                    <span class="description text-center"><%= __("Uploading") %>
                        <small class="text-center"><%= __("We are uploading your results") %></small>
                        <small class="text-center"><%= __("This might take a few moments") %></small>
                    </span>
                </div>
            </div>
            <div id="socket-init" class="loading row step d-none">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div id="init-loader" class="animation">
                    <div class="animation-content loader-wrapper d-flex flex-column">
                        <div class="loader-animation align-self-center">
                            <div></div>
                        </div>
                        <span class="animation-title-text text-center"><%= __("Initialization in progress...") %></span>
                    </div>
                </div>
                <div id="downloading-loader" class="col-12 animation d-none">
                    <div id="downloading-progress" class="loader-progress">
                        <div class="middle-circle"></div>
                        <div class="progress-spinner"></div>
                    </div>
                    <div class="animation-title-text text-center">
                        <span><%= __("Downloading resources...") %></span>
                    </div>
                </div>
            </div>
            <!-- Age Estimation -->
            <div class="row step d-none" id="step-age-estimation">
                <header class="row header">
                    <div class="col logo">
                        <img alt="Logo" src="./img/logo-passive-video.png">
                    </div>
                </header>
                <div class="animation">
                    <div class="animation-content">
                        <div class="best-image-row">
                            <div id="best-image-age-container" class="col">
                                <div id="best-image-age">
                                    <img id="best-image-age-result" src="./img/success_tick.svg" alt="success">
                                </div>
                                <span id="best-image-age-description" class="animation-content text-center d-none"><%= __("Autocaptured selfie (liveness & age estimation)")%></span>
                            </div>
                            <div id="best-image-match-container" class="col d-none">
                                <div id="best-image-match"></div>
                                <span id="best-image-match-description" class="animation-content text-center"><%= __("Reference portrait (matching)")%></span>
                            </div>
                        </div>
                        <span class="animation-title-text text-center age-success d-none"><%= __("Good Job ! You meet the age criteria.")%></span>
                        <span class="animation-title-text text-center age-failure d-none"><%= __("Oops! You are too young.")%></span>
                        <div class="age-estimation-top-block">
                            <span class="animation-age-estimation-text-left"><%= __("Age estimation:")%></span>
                            <span class="animation-age-estimation-text-right">&nbsp;<%= __("years old")%></span>
                            <span id="age-estimation-value" class="animation-age-estimation-text-right"></span>
                        </div>
                        <div class="age-estimation-bottom-block">
                            <span class="animation-age-estimation-text-left"><%= __("Threshold:")%></span>
                            <span class="animation-age-estimation-text-right">&nbsp;<%= __("years old")%></span>
                            <span id="age-threshold-value" class="animation-age-estimation-text-right"></span>
                        </div>
                    </div>
                    <div class="footer">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-primary btn-block" data-target="#step-1">
                                    <%= __("Finish") %>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>

        <script src="<%=JAVASCRIPT_PATH%>/bioserver-environment-api.js"></script>
        <script src="./js/detect-env.js"></script>
        <script src="<%=JAVASCRIPT_PATH%>/bioserver-video-api.js"></script>
        <script src="<%=JAVASCRIPT_PATH%>/bioserver-network-check.js"></script>
        <script src="<%=JAVASCRIPT_PATH%>/bioserver-video-ui.js"></script>
        <script src="./js/index.js"></script>
    </body>
</html>
